# Changelog

## v1.0.4 (2026-02-04)

### 🔧 修复
- **Web 播放器**:
  - 修复播放音乐、获取歌词及搜索时未携带用户身份信息，导致服务端识别为 Guest 用户且无法访问私有源的问题。
  - 修复 `config.js` 变量作用域问题，确保界面能正确读取并显示版本号。

## v1.0.3 (2026-02-04)

### 🌟 新增功能 & 优化
- **自定义源 (Custom Source)**:
  - **存储隔离**: 采用新的存储结构，用户源存入 `{username}` 目录，公开源存入 `_open` 目录。
  - **权限控制**: 实现分级访问控制，登录用户可访问 私有+公开源，未登录用户仅可见公开源。
  - **UI 增强**:
    - 设置界面新增 **"启用公开源"** 开关，可自由切换是否显示公共脚本。
    - 新增 **源作用域标签** (公开/用户名)，清晰标识脚本归属。
    - 上传界面增加 **上传目标** 提示 (Upload Target)。

### 🔧 修复
- **Web 播放器**:
  - 修复本地/自动登录后用户名未及时同步到 UI 的问题。
  - 修复设置界面开关按钮样式显示异常。

## v1.0.2 (2026-02-04)

### 🔧 修复
- **文件管理器**:
  - 修复在线引用。

## v1.0.1 (2026-02-04)

### 🌟 新增功能 & 优化
- **Web 播放器**:
  - 优化移动端布局，减少详情页边缘留白，防止歌词在缩放时被遮挡。
  - 优化播放体验，切换歌曲时立即暂停当前播放。
- **管理控制台**:
  - 侧边栏增加版本号显示。

### 🔧 修复 & 改进
- **服务端**:
  - 改进自定义源获取音乐链接的重试逻辑：
    - 单一源失败时自动重试 3 次。
    - 多源支持时自动轮询尝试不同源。
